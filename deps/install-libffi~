#!/bin/bash

# This setting sets script to exit upon an error 
set -e

# Directory for the program and it's libs
DIR=/opt/Write2chordpro

# Build, install, and strip 'libffi-3.0.13' 
if [ -e $DIR/lib/libffi.so ]; then
    echo "'libffi-3.0.13'..........already installed"
else
    tar -zxf libffi-3.0.13.tar.gz
    cd libffi-3.0.13
    patch -Np1 -i ../libffi-3.0.13-includedir-1.patch
    ./configure --prefix=$DIR --disable-static
    make
    sudo make install
    cd ..
    rm -rf libffi-3.0.13
    sudo strip -s $DIR/lib/libffi.so.6.0.1

# Build, install, and strip 'expat-2.1.0'
if [ -e $DIR/lib/libexpat.so ]; then
    echo "'expat-2.1.0'..........already installed"
else
tar -zxf expat-2.1.0.tar.gz
cd expat-2.1.0
./configure --prefix=$DIR --disable-static


